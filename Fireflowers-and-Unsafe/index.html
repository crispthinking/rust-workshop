<html>
  <head>
    <title>Fireflowers and Unsafe</title>
    <meta name="viewport" content="width=700">
    <link href="https://fonts.googleapis.com/css?family=Merriweather|Open+Sans" rel="stylesheet">
    <link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <link rel="stylesheet" href="../style.css">
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <body><header class="page-heading"><h1><a href="#">Fireflowers and Unsafe</h1><a class="home-link" href="../">presentation-notes</a></header><p>There are some things which can't be acchived within the restrictions
of safe Rust. Rust tends to take a pragmatic approach here. If you
want to allow mutliple borrows to share nodes in a tree for example
and, every now and again, mutate one you can't. If you want to build a
doubly linked-list you can't. What would the lifetimes of the borrows
be for the next and previous links.</p>
<pre><code>struct ListNode&lt;T, 'a&gt; {
    data: T,
    next: &amp;'a ListNode&lt;T, 'a&gt;,
    prev: &amp;'a ListNode&lt;T, 'a&gt;,
}
</code></pre>
<h2 id="Breaking-Out"><a href="#Breaking-Out">Breaking Out</a></h2><p>There are many techniques to work around these problems, many of them
safe Rust. If that fails however you can break out the <code>unsafe</code>
keyword. Unsafe rust has the same syntax as safe Rust, but it's up to
you as the programmer to make sure the safety guarantees are
upheld. You can use <em>raw pointers</em>, <code>null</code>, break ownership and
lifetime guarantees, perform casts, and call out to C APIs.</p>
<pre><code>struct ListNode&lt;T&gt; {
    data: T,
    next: *mut ListNode&lt;T&gt;,
    prev: *mut ListNode&lt;T&gt;,
}
</code></pre>
<p>The idiom in rust is to use <code>unsafe</code> as sparingly as possible and
build simple safe abstractions with it. There are many useful things
in the standard library which are built with <code>unsafe</code> so you don't
have to use it:</p>
<ul>
<li><code>RefCell</code> so you can share mutable state (although only one thing
can actually mutate it at once.)</li>
<li><code>Mutex</code> so you can share data between threads</li>
</ul>
<h2 id="Become-Fire-Mario"><a href="#Become-Fire-Mario">Become Fire Mario</a></h2><p>Rust has an impressive ecosystem. There are thousands of published
packages, or crates, produced by the community of rust enthusiasts; or
Rustaceans as we like to call ourselves. Many people who use Rust end
up raving about it. It's easy to think that people like Rust because
of &quot;memory safety without GC&quot;, the awesome iterator adapter APIs, or
the cute little Ferris mascott.</p>
<p>These are just the tools though. The metaphore used in the Rust
comunity is that as a programmer you are Mario. Rust is a Fire
Flower. When you use Rust you become Fire Maro. You're bigger, better,
and can shoot fireballs. Awesome right? You shouldn't use rust because
of any one of its features. You should use rust becasuse it makes you
Fire Mario.</p>
<footer></footer></body></html>